{% extends "layouts/index_paper_kit.html" %}

{% from "includes/navbar.html" import navbar %}

{% from "includes/modal-types-more-info.html" import modal_types_more_info %}
{% from "includes/modal-export-map.html" import modal_export_map %}

{% block head %}

{# here we don't call super because we want to avoid including some of the parent css (namely the sticky footer stuff) #}


    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Rede Convergir
    </title>

    {# paper kit css #}

    <link href="/static/bootstrap/3.3.5/css/bootstrap.css" rel="stylesheet" />

    <link href="/static/bootstrap/x_paper_kit_1.0/assets/css/ct-paper.css" rel="stylesheet"/>
    <link href="/static/bootstrap/x_paper_kit_1.0/assets/css/demo.css" rel="stylesheet" /> 
    <link href="/static/bootstrap/x_paper_kit_1.0/assets/css/examples.css" rel="stylesheet" /> 
    <link href="/static/font-awesome/4.4.0/css/font-awesome.css" rel="stylesheet">

    <link href="/static/_css/paper-kit-override.css" rel="stylesheet" /> 
    <link href="/static/_css/rc-global.css" rel="stylesheet"/>
{#    <link href="/static/_css/sticky-footer.css" rel="stylesheet"/> #}

    <link href='http://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>


<link href="/static/leaflet/leaflet-1.0beta2/leaflet.css" rel="stylesheet" />
<link href="/static/leaflet/leaflet-label-9c431d/leaflet.label.css" rel="stylesheet" />

<link href="/rc-app/_css/cartografia.css" rel="stylesheet" />
<link href="/rc-app/_css/menu.css" rel="stylesheet" />

<link href="/static/jquery/icheck-1.0.2/skins/minimal/grey.css" rel="stylesheet" />

<style>
    #map-container {
        top: 0px;
    }
</style>

{% endblock %}


{% block body %}

<div id="main-container">

    <div id="map-container" xstyle="border: solid 1px;">

                        {#
                                <!-- container for modal -->
                                <div class="modal x-fade" id="modal-1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                                  <div class="modal-dialog" role="document">
                                    <div id="mn-r-modal" class="modal-content" >


                                    </div>
                                  </div>
                                </div>
                        #}
                        
        <div class="row" style="height: 100%; margin: 0;">
            <div id="mn-r-map" class="col-sm-12" style="height: 100%; padding: 0;">
            </div>
        </div>

    </div>
</div>


<!-- modal bodies -->
{{ modal_types_more_info(ctx) }}
{{ modal_export_map(ctx) }}
<!--   end modal -->



{{ super() }}


    <script type="text/javascript">

    window.RCData = window.RCData || {};
    RCData.initiatives = {{ ctx.initiatives | stringify }};
    RCData.definitionsAll = {{ ctx.definitions | stringify }};

    // manually add the "other" type (this is like a dummy type but must be to be shown in the filters)
    RCData.definitionsAll["type_other"] = {
        id: "type_other",
        description: {
            pt: "Outro",
            _order: "type999"
        },
        title: {
            pt: "Outro"
        }
    };

    RCData.initial = {{ ctx.query | stringify }};

    </script>


    <!-- cartografia libs -->
    <!-- NOTE: if we add new files here, we must add in the gruntfile as well -->
    <script src="/static/_js/{{ bundles['rc-templates'] }}"></script>
    <script src="/static/jquery/jquery.documentsize-1.2.1.js"></script>
    <script src="/static/jquery/jquery.mousewheel-3.1.12.js"></script>
    <script src="/static/jquery/jquery.scrollTo-2.12.js"></script>
    <script src="/static/jquery/icheck-1.0.2/icheck.js"></script>

{#
                <script src="/static/leaflet/leaflet-0.7.5/leaflet-0.7.5.js"></script>
                <script src="/static/leaflet/mapbox-2.2.2/mapbox.standalone.uncompressed.js"></script>
                <script src="/static/leaflet/leaflet-control-geocoder-1.3.1/Control.Geocoder-1.3.1.js"></script>
#}    
    <script src="/static/leaflet/leaflet-1.0beta2/leaflet-src.js"></script>
    <script src="/static/leaflet/leaflet-label-9c431d/leaflet.label-src.js"></script>
    
    <script src="/static/q/q-1.4.1.js"></script>
    <script src="/static/underscore/underscore-1.6.0.js"></script>
    <script src="/static/bootstrap/bootstrap-treeview.js"></script>
    <script src="/static/nunjucks/nunjucks-slim-1.3.3.js"></script>
    <script src="/static/backbone/json2.js"></script>
    <script src="/static/backbone/backbone-1.1.2.js"></script>
    <script src="/static/backbone/backbone.select-1.3.2.js"></script>
    <script src="/static/backbone/backbone.radio-1.0.1.js"></script>
    <script src="/static/backbone/backbone.marionette-2.4.1.js"></script>
    <script src="/static/backbone/renderer-nunjucks.js"></script>


    <!-- cartografia app -->
    <!-- NOTE: if we add new files here, we must add in the gruntfile as well -->

    <script src="/rc-app/index.js"></script>
    <script src="/rc-app/leaflet-backbone-view.js"></script>
    <script src="/rc-app/entities.js"></script>
{#    <script src="/rc-app/behaviors.js"></script> #}
    <script src="/rc-app/menu/menu.js"></script>
    <script src="/rc-app/map/map.js"></script>
    <script src="/rc-app/init.js"></script>


{% endblock %}
